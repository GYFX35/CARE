{% extends "base.html" %}

{% block content %}
    <article>
        <h2>{{ post.title }}</h2>
        <p>by <a href="{{ url_for('user', username=post.author.username) }}">{{ post.author.username }}</a></p>
        <p>{{ post.content }}</p>
        <p>
            <span>({{ post.votes }} votes)</span>
            <a href="{{ url_for('upvote', post_id=post.id) }}">Upvote</a>
        </p>
        <p>
            Category: <a href="{{ url_for('category', id=post.category.id) }}">{{ post.category.name }}</a>
            |
            Tags:
            {% for tag in post.tags %}
                <a href="{{ url_for('tag', id=tag.id) }}">{{ tag.name }}</a>
            {% endfor %}
        </p>
        <div class="social-sharing">
            <h4>Share this post:</h4>
            <a href="https://twitter.com/intent/tweet?url={{ request.url }}&text={{ post.title }}" target="_blank">Twitter</a>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.url }}" target="_blank">Facebook</a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.url }}&title={{ post.title }}&summary={{ post.content }}" target="_blank">LinkedIn</a>
        </div>
    </article>
    <hr>
    <section class="comments">
        <h3>{{ _('Comments') }}</h3>
        {% for comment in comments %}
            <article>
                <p><img src="{{ comment.author.profile_picture or url_for('static', filename='default_avatar.png') }}" alt="Profile Picture" width="32" height="32"> <a href="{{ url_for('user', username=comment.author.username) }}">{{ comment.author.username }}</a> {{ _('says:') }}</p>
                <p>{{ comment.body }}</p>
            </article>
        {% endfor %}
    </section>
    <hr>
    <section class="add-comment">
        <h3>{{ _('Add a comment') }}</h3>
        <form action="" method="post">
            {{ form.hidden_tag() }}
            <p>
                {{ form.body.label }}<br>
                {{ form.body(cols=35, rows=4) }}<br>
                {% for error in form.body.errors %}
                <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </p>
            <p>{{ form.submit(_('Submit')) }}</p>
        </form>
    </section>
{% endblock %}
